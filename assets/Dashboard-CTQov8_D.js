import{j as w,E as ke,f as M,r as Ge,c as _,G as Ie,Y as je,H as l,I,J as u,n,K,L as v,u as i,M as Q,N as S,O as _e,P as ce,U as g,S as qe,Q as m,W as Te,Z as Ue,q as O,$ as U,F as R,V as q,_ as oe,a5 as Pe,a6 as Xe,a7 as ft,a8 as bt,w as yt,v as _t,x as Ve,a9 as gt}from"./vue-BNYTpfxP.js";import{_ as Ne,a as kt,b as ge,__tla as __tla_0}from"./ColoredChip.vue_vue_type_script_setup_true_lang-H_sCYMma.js";import{a as Be,Z as le,V as Ee,c as me,d as Le,e as Z,f as Ae,g as $e,h as A,i as ne,j as Ke,az as Me,aO as Tt,aP as Se,p as Re,r as be,v as ye,aw as $t,aQ as Y,E as Ye,aa as Ct,ay as wt,s as ue,Q as X,aR as Qe,aS as Vt,aT as St,Y as xt,aU as Dt,aV as j,k as xe,q as Ze,m as N,aW as It,aX as Pt,aY as We,C as Ce,aZ as Je,a_ as et,a$ as Bt,b0 as Et,b1 as W,b2 as D,b3 as tt,ad as Fe,X as Lt,b4 as At,aK as Kt,b5 as Oe,b6 as Mt,x as ze,b7 as De,b8 as Rt,__tla as __tla_1}from"./index-RUnWVGK9.js";import{d as Ft}from"./index-zxiskicQ.js";import{a as at,u as ot}from"./vuetify-ChSkAksr.js";import{u as Ut,__tla as __tla_2}from"./ArrayPagination-C3tHBoge.js";let _o;let __tla=Promise.all([(()=>{try{return __tla_0}catch{}})(),(()=>{try{return __tla_1}catch{}})(),(()=>{try{return __tla_2}catch{}})()]).then(async()=>{let Nt,ae,G,Ot,He,zt,Ht,Gt,jt,qt,Xt,Yt,Qt,Zt,lt,Wt,Jt,ea,nt,ta,aa,oa,st,la,na,sa,ra,rt,ia,da,ua,ca,it,ma,pa,dt,va,ha,ut,fa,ba,ya,ct,_a,ga,mt,ka,Ta,$a,Ca,wa,Va,Sa,xa,Da,Ia,Pa,Ba,Ea,La,Aa,Ka,Ma,Ra,Fa,Ua,Na,Oa,za,Ha,Ga,ja,qa,Xa,Ya,Qa,Za,Wa,Ja,eo,to,ao,oo,lo,no,so,ro,io,uo,co,mo;Nt=w({__name:"RenameTorrentDialog",props:{guid:{},hash:{}},setup(f){const e=f,{isOpened:s}=Be(e.guid),{t:a}=ke(),t=le(),d=M(),o=M(),h=M(!1),p=Ge({newName:""}),r=[C=>!!C||a("dialogs.renameTorrent.required"),C=>C!==c.value||a("dialogs.renameTorrent.sameName")],b=_(()=>t.getTorrentByHash(e.hash)),c=_(()=>b.value?.name);async function L(){await o.value?.validate(),h.value&&(await t.renameTorrent(e.hash,p.newName),P())}const P=()=>{s.value=!1};return Ie(()=>{p.newName=b.value?.name||""}),je(()=>{d.value?.select()}),(C,$)=>(l(),I(Ke,{modelValue:i(s),"onUpdate:modelValue":$[3]||($[3]=y=>ce(s)?s.value=y:null)},{default:u(()=>[n(ne,null,{default:u(()=>[n(Ee,null,{default:u(()=>[K(v(C.$t("dialogs.renameTorrent.title")),1)]),_:1}),n(me,null,{default:u(()=>[n(i(Le),{modelValue:h.value,"onUpdate:modelValue":$[1]||($[1]=y=>h.value=y),ref_key:"form",ref:o,onSubmit:$[2]||($[2]=Q(()=>{},["prevent"]))},{default:u(()=>[c.value?(l(),I(Z,{key:0,"model-value":c.value,disabled:"",label:C.$t("dialogs.renameTorrent.oldName")},null,8,["model-value","label"])):S("",!0),n(Z,{modelValue:p.newName,"onUpdate:modelValue":$[0]||($[0]=y=>p.newName=y),ref_key:"field",ref:d,rules:r,autofocus:"",label:C.$t("dialogs.renameTorrent.newName"),onKeydown:_e(L,["enter"])},null,8,["modelValue","label"])]),_:1},8,["modelValue"])]),_:1}),n(Ae,null,{default:u(()=>[n($e),n(A,{color:"error",onClick:P},{default:u(()=>[K(v(C.$t("common.cancel")),1)]),_:1}),n(A,{color:"accent",disabled:!h.value,onClick:L},{default:u(()=>[K(v(C.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});ae=-2;G=-1;Ot=w({__name:"ShareLimitDialog",props:{guid:{},hashes:{}},setup(f){const e=f,{isOpened:s}=Be(e.guid),a=Me(),t=le(),d=M(!1),o=M("global"),h=M(!1),p=M(0),r=M(!1),b=M(0),c=M(!1),L=M(0),P=_(()=>o.value!=="enabled");function C(){s.value=!1}async function $(){switch(o.value){case"global":await a.setShareLimit(e.hashes,ae,ae,ae);break;case"disabled":await a.setShareLimit(e.hashes,G,G,G);break;case"enabled":await a.setShareLimit(e.hashes,h.value?p.value:G,r.value?b.value:G,c.value?L.value:G);break}C()}return Ie(async()=>{const y=t.getTorrentByHash(e.hashes[0]);if(!y)return C();const T=y.ratio_limit,x=y.seeding_time_limit,F=y.inactive_seeding_time_limit;T===ae&&x===ae&&F===ae?o.value="global":T===G&&x===G&&F===G?o.value="disabled":(o.value="enabled",h.value=T>=0,p.value=h.value?T:0,r.value=x>=0,b.value=r.value?x:0,c.value=F>=0,L.value=c.value?F:0)}),(y,T)=>(l(),I(Ke,{modelValue:i(s),"onUpdate:modelValue":T[9]||(T[9]=x=>ce(s)?s.value=x:null),"max-width":"500"},{default:u(()=>[n(ne,{title:y.$t("dialogs.share_limit.title")},{default:u(()=>[n(me,null,{default:u(()=>[n(Le,{modelValue:d.value,"onUpdate:modelValue":T[7]||(T[7]=x=>d.value=x),onSubmit:T[8]||(T[8]=Q(()=>{},["prevent"])),onKeydown:_e(Q($,["prevent"]),["enter"])},{default:u(()=>[n(Tt,{modelValue:o.value,"onUpdate:modelValue":T[0]||(T[0]=x=>o.value=x)},{default:u(()=>[n(Se,{label:y.$t("dialogs.share_limit.global"),value:"global"},null,8,["label"]),n(Se,{label:y.$t("dialogs.share_limit.disabled"),value:"disabled"},null,8,["label"]),n(Se,{label:y.$t("dialogs.share_limit.enabled"),value:"enabled"},null,8,["label"])]),_:1},8,["modelValue"]),n(Re,null,{default:u(()=>[n(be,{cols:"12",class:"d-flex align-center"},{default:u(()=>[g("span",null,[n(ye,{modelValue:h.value,"onUpdate:modelValue":T[1]||(T[1]=x=>h.value=x),disabled:P.value},null,8,["modelValue","disabled"])]),n(Z,{modelValue:p.value,"onUpdate:modelValue":T[2]||(T[2]=x=>p.value=x),disabled:P.value||!h.value,density:"compact","hide-details":"",label:y.$t("dialogs.share_limit.ratio_limit")},null,8,["modelValue","disabled","label"])]),_:1}),n(be,{cols:"12",class:"d-flex align-center"},{default:u(()=>[g("span",null,[n(ye,{modelValue:r.value,"onUpdate:modelValue":T[3]||(T[3]=x=>r.value=x),disabled:P.value},null,8,["modelValue","disabled"])]),n(Z,{modelValue:b.value,"onUpdate:modelValue":T[4]||(T[4]=x=>b.value=x),disabled:P.value||!r.value,density:"compact","hide-details":"",label:y.$t("dialogs.share_limit.seeding_time_limit")},null,8,["modelValue","disabled","label"])]),_:1}),n(be,{cols:"12",class:"d-flex align-center"},{default:u(()=>[g("span",null,[n(ye,{modelValue:c.value,"onUpdate:modelValue":T[5]||(T[5]=x=>c.value=x),disabled:P.value},null,8,["modelValue","disabled"])]),n(Z,{modelValue:L.value,"onUpdate:modelValue":T[6]||(T[6]=x=>L.value=x),disabled:P.value||!c.value,density:"compact","hide-details":"",label:y.$t("dialogs.share_limit.inactive_seeding_time_limit")},null,8,["modelValue","disabled","label"])]),_:1})]),_:1})]),_:1},8,["modelValue","onKeydown"])]),_:1}),n(Ae,null,{default:u(()=>[n($e),n(A,{color:"error",onClick:C},{default:u(()=>[K(v(y.$t("common.cancel")),1)]),_:1}),n(A,{color:"accent",disabled:!d.value,onClick:$},{default:u(()=>[K(v(y.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]))}});He=w({__name:"SpeedLimitDialog",props:{guid:{},hashes:{},mode:{}},setup(f){const e=f,{isOpened:s}=Be(e.guid),a=Me(),t=le(),d=M(!1),o=M(0);function h(){s.value=!1}async function p(){const r=Math.max(0,o.value)*1e3;switch(e.mode){case"download":await a.setDownloadLimit(r,e.hashes);break;case"upload":await a.setUploadLimit(r,e.hashes);break}h()}return Ie(async()=>{const r=t.getTorrentByHash(e.hashes[0]);if(!r)return h();switch(e.mode){case"download":o.value=Math.max(0,Math.round(r.dl_limit/1e3));break;case"upload":o.value=Math.max(0,Math.round(r.up_limit/1e3));break}}),(r,b)=>(l(),I(Ke,{modelValue:i(s),"onUpdate:modelValue":b[3]||(b[3]=c=>ce(s)?s.value=c:null)},{default:u(()=>[n(ne,{title:r.$t(`dialogs.speed_limit.${r.mode}`)},{default:u(()=>[n(me,null,{default:u(()=>[n(Le,{modelValue:d.value,"onUpdate:modelValue":b[1]||(b[1]=c=>d.value=c),onSubmit:b[2]||(b[2]=Q(()=>{},["prevent"])),onKeydown:_e(Q(p,["prevent"]),["enter"])},{default:u(()=>[n(Z,{modelValue:o.value,"onUpdate:modelValue":b[0]||(b[0]=c=>o.value=c),modelModifiers:{number:!0},type:"number",autofocus:"",clearable:"",label:r.$t("dialogs.speed_limit.label"),"prepend-inner-icon":"mdi-speedometer",suffix:"kB/s",onKeydown:_e(Q(p,["prevent"]),["enter"])},null,8,["modelValue","label","onKeydown"])]),_:1},8,["modelValue","onKeydown"])]),_:1}),n(Ae,null,{default:u(()=>[n($e),n(A,{color:"error",onClick:h},{default:u(()=>[K(v(r.$t("common.cancel")),1)]),_:1}),n(A,{color:"accent",disabled:!d.value,onClick:p},{default:u(()=>[K(v(r.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]))}});zt={class:"d-flex justify-space-around"};Ht=w({__name:"RightClick",props:{rightClickProperties:{}},setup(f){const{t:e}=ke(),s=qe(),a=$t(),t=Y(),d=Ye(),o=Me(),h=Ct(),p=wt(),r=le(),b=_(()=>t.selectedTorrents.length>1),c=_(()=>t.selectedTorrents),L=_(()=>c.value[0]),P=_(()=>r.getTorrentByHash(L.value)),C=_(()=>t.selectedTorrents.map(r.getTorrentByHash).filter(V=>!!V)),$=_(()=>["",...a.categories.keys()]);async function y(){await r.resumeTorrents(c)}async function T(){await r.forceResumeTorrents(c)}async function x(){await r.pauseTorrents(c)}function F(){d.createDialog(Qe,{hashes:[...t.selectedTorrents]})}function pe(){d.createDialog(Ne,{hashes:[...t.selectedTorrents],mode:"dl"})}function ve(){d.createDialog(Ne,{hashes:[...t.selectedTorrents],mode:"save"})}function we(){d.createDialog(Nt,{hash:t.selectedTorrents[0]})}async function se(){await r.recheckTorrents(c)}async function re(){await r.reannounceTorrents(c)}async function ie(){await r.toggleSeqDl(c)}async function J(){await r.toggleFLPiecePrio(c)}async function he(){await r.toggleAutoTmm(c,!P.value?.auto_tmm)}function ee(V){return C.value.every(H=>H&&H.tags&&H.tags.includes(V))}async function de(){await r.removeTorrentTags(c.value)}async function fe(V){ee(V)?await r.removeTorrentTags(c.value,[V]):await r.addTorrentTags(c.value,[V])}async function k(V){try{await navigator.clipboard.writeText(V)}catch{Ue.error(e("toast.copy.error"));return}Ue.success(e("toast.copy.success"))}function B(){d.createDialog(He,{hashes:c.value,mode:"download"})}function E(){d.createDialog(He,{hashes:c.value,mode:"upload"})}function pt(){d.createDialog(Ot,{hashes:c.value})}async function vt(){c.value.forEach(V=>{r.exportTorrent(V).then(H=>{const z=window.URL.createObjectURL(H),te=document.createElement("a");te.href=z,te.style.opacity="0",te.setAttribute("download",`${V}.torrent`),document.body.appendChild(te),te.click(),document.body.removeChild(te)})})}const ht=_(()=>[{text:e("dashboard.right_click.advanced.title"),icon:"mdi-head-cog",children:[{text:e("dashboard.right_click.advanced.download_path"),icon:"mdi-tray-arrow-down",action:pe},{text:e("dashboard.right_click.advanced.save_path"),icon:"mdi-content-save",action:ve},{text:e("dashboard.right_click.advanced.rename"),icon:"mdi-rename-box",hidden:b.value,action:we},{text:e("dashboard.right_click.advanced.recheck"),icon:"mdi-playlist-check",action:se},{text:e("dashboard.right_click.advanced.reannounce"),icon:"mdi-bullhorn",action:re},{text:e("dashboard.right_click.advanced.seq_dl"),icon:P.value?.seq_dl?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:ie},{text:e("dashboard.right_click.advanced.f_l_prio"),icon:P.value?.f_l_piece_prio?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:J},{text:e("dashboard.right_click.advanced.auto_tmm"),icon:P.value?.auto_tmm?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:he}]},{text:e("dashboard.right_click.priority.title"),icon:"mdi-priority-high",hidden:!h.preferences?.queueing_enabled,children:[{text:e("dashboard.right_click.priority.top"),icon:"mdi-priority-high",action:async()=>await r.setTorrentPriority(c.value,"topPrio")},{text:e("dashboard.right_click.priority.increase"),icon:"mdi-arrow-up",action:async()=>await r.setTorrentPriority(c.value,"increasePrio")},{text:e("dashboard.right_click.priority.decrease"),icon:"mdi-arrow-down",action:async()=>await r.setTorrentPriority(c.value,"decreasePrio")},{text:e("dashboard.right_click.priority.bottom"),icon:"mdi-priority-low",action:async()=>await r.setTorrentPriority(c.value,"bottomPrio")}]},{text:e("dashboard.right_click.tags.title"),icon:"mdi-tag",disabled:p.tags.length===0,disabledText:e("dashboard.right_click.tags.disabled_title"),disabledIcon:"mdi-tag-off",children:[...P.value?.tags.length?[{text:e("dashboard.right_click.tags.remove_all"),action:()=>de().then(o.forceMaindataSync),icon:"mdi-playlist-remove"}]:[],...p.tags.map(V=>({text:V,icon:ee(V)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:async()=>await fe(V).then(o.forceMaindataSync)}))]},{text:e("dashboard.right_click.category.title"),icon:"mdi-label",disabled:a.categories.size===0,disabledText:e("dashboard.right_click.category.disabled_title"),disabledIcon:"mdi-label-off",children:$.value.map(V=>({text:V===""?e("dashboard.right_click.category.clear"):V,action:async()=>await r.setTorrentCategory(c.value,V).then(o.forceMaindataSync)}))},{text:e("dashboard.right_click.speed_limit.title"),icon:"mdi-speedometer-slow",children:[{text:e("dashboard.right_click.speed_limit.download"),icon:"mdi-download",action:B},{text:e("dashboard.right_click.speed_limit.upload"),icon:"mdi-upload",action:E},{text:e("dashboard.right_click.speed_limit.share"),icon:"mdi-account-group",action:pt}]},{text:e("dashboard.right_click.copy.title"),icon:"mdi-content-copy",hidden:b.value,children:[{text:e("dashboard.right_click.copy.name"),icon:"mdi-alphabetical-variant",action:async()=>P.value&&await k(P.value.name)},{text:e("dashboard.right_click.copy.hash"),icon:"mdi-pound",action:async()=>await k(L.value)},{text:e("dashboard.right_click.copy.magnet"),icon:"mdi-magnet",action:async()=>P.value&&await k(P.value.magnet)}]},{text:e("dashboard.right_click.export",t.selectedTorrents.length),icon:b.value?"mdi-download-multiple":"mdi-download",action:vt},{text:e("dashboard.right_click.info"),icon:"mdi-information",hidden:b.value,action:()=>s.push({name:"torrentDetail",params:{hash:L.value}})}]);return(V,H)=>(l(),m("div",{style:Te(`position: absolute; left: ${V.rightClickProperties.offset[0]}px; top: ${V.rightClickProperties.offset[1]}px;`)},[n(i(kt),{modelValue:V.rightClickProperties.isVisible,"onUpdate:modelValue":H[0]||(H[0]=z=>V.rightClickProperties.isVisible=z),"menu-data":ht.value},{top:u(()=>[n(ue,null,{default:u(()=>[g("div",zt,[n(X,{location:"top"},{activator:u(({props:z})=>[n(A,O({density:"compact",variant:"plain",icon:"mdi-play"},z,{onClick:y}),null,16)]),default:u(()=>[g("span",null,v(V.$t("dashboard.right_click.top.resume")),1)]),_:1}),n(X,{location:"top"},{activator:u(({props:z})=>[n(A,O({density:"compact",variant:"plain",icon:"mdi-fast-forward"},z,{onClick:T}),null,16)]),default:u(()=>[g("span",null,v(V.$t("dashboard.right_click.top.force_resume")),1)]),_:1}),n(X,{location:"top"},{activator:u(({props:z})=>[n(A,O({density:"compact",variant:"plain",icon:"mdi-pause"},z,{onClick:x}),null,16)]),default:u(()=>[g("span",null,v(V.$t("dashboard.right_click.top.pause")),1)]),_:1}),n(X,{location:"top"},{activator:u(({props:z})=>[n(A,O({color:"red",density:"compact",variant:"plain",icon:"mdi-delete-forever"},z,{onClick:F}),null,16)]),default:u(()=>[g("span",null,v(V.$t("dashboard.right_click.top.delete")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue","menu-data"])],4))}});Gt={class:"d-flex my-3"};jt={class:"pa-0"};qt={class:"d-flex align-center text-uppercase text-select",style:{"font-size":"0.8em"}};Xt=w({__name:"Toolbar",setup(f){const{t:e}=ke(),s=Y(),{torrentCountString:a,isSelectionMultiple:t,displayMode:d}=U(s),{isDrawerOpen:o}=U(Vt()),h=le(),{sortCriterias:p}=U(h),r=[{value:"added_on",title:e("dashboard.sortBy.added_on")},{value:"amount_left",title:e("dashboard.sortBy.amount_left")},{value:"availability",title:e("dashboard.sortBy.availability")},{value:"available_peers",title:e("dashboard.sortBy.available_peers")},{value:"available_seeds",title:e("dashboard.sortBy.available_seeds")},{value:"avgDownloadSpeed",title:e("dashboard.sortBy.avg_download_speed")},{value:"avgUploadSpeed",title:e("dashboard.sortBy.avg_upload_speed")},{value:"basename_content_path",title:e("dashboard.sortBy.basename_content_path")},{value:"basename_download_path",title:e("dashboard.sortBy.basename_download_path")},{value:"basename_save_path",title:e("dashboard.sortBy.basename_save_path")},{value:"category",title:e("dashboard.sortBy.category")},{value:"completed_on",title:e("dashboard.sortBy.completion_on")},{value:"content_path",title:e("dashboard.sortBy.content_path")},{value:"dl_limit",title:e("dashboard.sortBy.dl_limit")},{value:"dlspeed",title:e("dashboard.sortBy.dlspeed")},{value:"download_path",title:e("dashboard.sortBy.download_path")},{value:"downloaded",title:e("dashboard.sortBy.downloaded")},{value:"downloaded_session",title:e("dashboard.sortBy.downloaded_session")},{value:"eta",title:e("dashboard.sortBy.eta")},{value:"globalSpeed",title:e("dashboard.sortBy.globalSpeed")},{value:"globalVolume",title:e("dashboard.sortBy.globalVolume")},{value:"hash",title:e("dashboard.sortBy.hash")},{value:"inactive_seeding_time_limit",title:e("dashboard.sortBy.inactive_seeding_time_limit")},{value:"infohash_v1",title:e("dashboard.sortBy.infohash_v1")},{value:"infohash_v2",title:e("dashboard.sortBy.infohash_v2")},{value:"last_activity",title:e("dashboard.sortBy.last_activity")},{value:"name",title:e("dashboard.sortBy.name")},{value:"num_leechs",title:e("dashboard.sortBy.num_leechs")},{value:"num_seeds",title:e("dashboard.sortBy.num_seeds")},{value:"priority",title:e("dashboard.sortBy.priority")},{value:"progress",title:e("dashboard.sortBy.progress")},{value:"ratio",title:e("dashboard.sortBy.ratio")},{value:"ratio_limit",title:e("dashboard.sortBy.ratio_limit")},{value:"savePath",title:e("dashboard.sortBy.save_path")},{value:"seeding_time",title:e("dashboard.sortBy.seeding_time")},{value:"seeding_time_limit",title:e("dashboard.sortBy.seeding_time_limit")},{value:"seen_complete",title:e("dashboard.sortBy.seen_complete")},{value:"size",title:e("dashboard.sortBy.size")},{value:"state",title:e("dashboard.sortBy.state")},{value:"tags",title:e("dashboard.sortBy.tags")},{value:"time_active",title:e("dashboard.sortBy.time_active")},{value:"total_size",title:e("dashboard.sortBy.total_size")},{value:"trackerDomain",title:e("dashboard.sortBy.tracker")},{value:"trackers_count",title:e("dashboard.sortBy.trackers_count")},{value:"up_limit",title:e("dashboard.sortBy.up_limit")},{value:"uploaded",title:e("dashboard.sortBy.uploaded")},{value:"uploaded_session",title:e("dashboard.sortBy.uploaded_session")},{value:"upspeed",title:e("dashboard.sortBy.upspeed")}].sort((C,$)=>St.text.asc(C.title,$.title)),b=_({get:()=>p.value[0],set:C=>{p.value=[{value:C.value,reverse:C.reverse}]}});function c(){h.textFilter=""}const L=_({get:()=>h.textFilter,set:Ft(C=>{h.textFilter=C??""},300)});function P(){t.value&&s.unselectAllTorrents(),t.value=!t.value}return(C,$)=>(l(),m(R,null,[g("div",null,[n(Z,{id:"searchInput",modelValue:L.value,"onUpdate:modelValue":$[0]||($[0]=y=>L.value=y),label:i(e)("dashboard.searchInputLabel"),clearable:"",density:"compact","single-line":"","hide-details":"","prepend-inner-icon":"mdi-magnify",variant:"solo","onClick:clear":$[1]||($[1]=y=>c())},null,8,["modelValue","label"])]),g("div",Gt,[n(X,{text:i(e)("dashboard.toggleSelectMode"),location:"top"},{activator:u(({props:y})=>[n(A,O({icon:i(t)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline"},y,{variant:"plain",onClick:P}),null,16,["icon"])]),_:1},8,["text"]),n(xt,null,{activator:u(({props:y})=>[n(X,{text:C.$t("dashboard.displayMode.title"),location:"top"},{activator:u(({props:T})=>[n(A,O({icon:""},O(y,T),{variant:"plain"}),{default:u(()=>[i(d)===i(j).LIST?(l(),I(xe,{key:0,icon:"mdi-view-list"})):S("",!0),i(d)===i(j).GRID?(l(),I(xe,{key:1,icon:"mdi-view-grid"})):S("",!0),i(d)===i(j).TABLE?(l(),I(xe,{key:2,icon:"mdi-table"})):S("",!0)]),_:2},1040)]),_:2},1032,["text"])]),default:u(()=>[n(Ze,null,{default:u(()=>[n(ue,{title:C.$t("dashboard.displayMode.list"),"prepend-icon":"mdi-view-list",onClick:$[2]||($[2]=y=>d.value=i(j).LIST)},null,8,["title"]),n(ue,{title:C.$t("dashboard.displayMode.grid"),"prepend-icon":"mdi-view-grid",onClick:$[3]||($[3]=y=>d.value=i(j).GRID)},null,8,["title"]),n(ue,{title:C.$t("dashboard.displayMode.table"),"prepend-icon":"mdi-table",onClick:$[4]||($[4]=y=>d.value=i(j).TABLE)},null,8,["title"])]),_:1})]),_:1}),n(X,{text:i(e)("dashboard.toggleSortOrder"),location:"top"},{activator:u(({props:y})=>[n(A,O({icon:b.value.reverse?"mdi-sort-descending":"mdi-sort-ascending"},y,{variant:"plain",onClick:$[5]||($[5]=T=>b.value.reverse=!b.value.reverse)}),null,16,["icon"])]),_:1},8,["text"]),g("div",jt,[n(Dt,{modelValue:b.value.value,"onUpdate:modelValue":$[6]||($[6]=y=>b.value.value=y),items:i(r),label:i(e)("dashboard.sortLabel"),"auto-select-first":"",density:"compact","hide-details":"",variant:"solo-filled",style:Te(`width: ${C.$vuetify.display.xs||C.$vuetify.display.sm&&i(o)?140:260}px`)},null,8,["modelValue","items","label","style"])]),n($e),g("div",qt,v(i(a)),1)])],64))}});Yt={class:"d-flex flex-column"};Qt={key:0,class:"text-caption text-grey"};Zt={key:0,class:"text-caption text-grey"};lt=w({__name:"ItemAmount",props:{torrent:{},titleKey:{},value:{type:Function},total:{type:Function}},setup(f){return(e,s)=>(l(),m("div",Yt,[e.titleKey?(l(),m("div",Qt,v(e.$t(e.titleKey)),1)):S("",!0),g("div",null,[K(v(e.value(e.torrent))+" ",1),e.total?(l(),m("span",Zt," / "+v(e.total(e.torrent)),1)):S("",!0)])]))}});Wt={key:0,class:"d-flex flex-column"};Jt={key:0,class:"text-caption text-grey"};ea={class:"d-flex flex-row flex-gap-column-small"};nt=w({__name:"ItemChip",props:{torrent:{},titleKey:{},value:{},emptyValueKey:{},color:{},enableHashColor:{type:Boolean,default:!1}},setup(f){const e=f,{hideChipIfUnset:s}=U(N()),a=_(()=>e.value(e.torrent)),t=_(()=>a.value.length<1||a.value[0]===""),d=_(()=>!(s.value&&t.value));return(o,h)=>d.value?(l(),m("div",Wt,[o.titleKey?(l(),m("div",Jt,v(o.$t(o.titleKey)),1)):S("",!0),g("div",ea,[t.value?(l(),I(ge,{key:0,disabled:!0,"default-color":o.color(o.torrent),value:o.$t(o.emptyValueKey),size:"small"},null,8,["default-color","value"])):(l(!0),m(R,{key:1},q(a.value,p=>(l(),I(ge,{disabled:!o.enableHashColor,"default-color":o.color(o.torrent),value:p,size:"small"},null,8,["disabled","default-color","value"]))),256))])])):S("",!0)}});ta={class:"d-flex flex-column"};aa={key:0,class:"text-caption text-grey"};oa={class:"text-caption text-grey"};st=w({__name:"ItemData",props:{torrent:{},titleKey:{},value:{type:Function}},setup(f){const e=f,{useBinarySize:s}=U(N()),a=_(()=>e.value(e.torrent));return(t,d)=>(l(),m("div",ta,[t.titleKey?(l(),m("div",aa,v(t.$t(t.titleKey)),1)):S("",!0),g("div",null,[K(v(i(It)(a.value,i(s)))+" ",1),g("span",oa,v(i(Pt)(a.value,i(s))),1)])]))}});la={class:"d-flex flex-column"};na={key:0,class:"text-caption text-grey"};sa={key:0};ra={key:1};rt=w({__name:"ItemDateTime",props:{torrent:{},titleKey:{},value:{type:Function}},setup(f){const e=f,{dateFormat:s}=U(N()),a=_(()=>e.value(e.torrent));return(t,d)=>(l(),m("div",la,[t.titleKey?(l(),m("div",na,v(t.$t(t.titleKey)),1)):S("",!0),g("div",null,[a.value>0?(l(),m("span",sa,v(i(We)(a.value,i(s))),1)):(l(),m("span",ra,v(t.$t("dashboard.not_complete")),1))])]))}});ia={class:"d-flex flex-column"};da={key:0,class:"text-caption text-grey"};ua={key:0};ca={key:1};it=w({__name:"ItemDuration",props:{torrent:{},titleKey:{},unit:{},value:{type:Function}},setup(f){const e=f,s=_(()=>e.value(e.torrent)),a=_(()=>{const t=Ce.duration(s.value,e.unit),d=[t.years(),t.months(),t.days(),t.hours(),t.minutes(),t.seconds()],o=["Y","M","d","h","m","s"];let h=!1;return d.map((p,r)=>{if(h||p)return h=!0,`${p}${o[r]}`}).filter(p=>p).join(" ")});return(t,d)=>(l(),m("div",ia,[t.titleKey?(l(),m("div",da,v(t.$t(t.titleKey)),1)):S("",!0),g("div",null,[s.value>0?(l(),m("span",ua,v(a.value),1)):(l(),m("span",ca,v(t.$t("common.NA")),1))])]))}});ma={class:"d-flex flex-column"};pa={key:0,class:"text-caption text-grey"};dt=w({__name:"ItemPercent",props:{torrent:{},titleKey:{},value:{type:Function},color:{type:Function}},setup(f){const e=f,s=_(()=>e.value(e.torrent));return(a,t)=>(l(),m("div",ma,[a.titleKey?(l(),m("div",pa,v(a.$t(a.titleKey)),1)):S("",!0),n(et,{"model-value":s.value,max:1,height:20,color:a.color(a.torrent),rounded:"sm",style:{width:"10em"}},{default:u(()=>[K(v(i(Je)(s.value)),1)]),_:1},8,["model-value","color"])]))}});va={class:"d-flex flex-column"};ha={key:0,class:"text-caption text-grey"};ut=w({__name:"ItemRelativeTime",props:{torrent:{},titleKey:{},value:{type:Function}},setup(f){return(e,s)=>(l(),m("div",va,[e.titleKey?(l(),m("div",ha,v(e.$t(e.titleKey)),1)):S("",!0),g("div",null,[g("span",null,v(i(Ce)(e.value(e.torrent)*1e3).fromNow()),1)])]))}});fa={class:"d-flex flex-column"};ba={key:0,class:"text-caption text-grey"};ya={class:"text-caption text-grey"};ct=w({__name:"ItemSpeed",props:{torrent:{},titleKey:{},value:{type:Function}},setup(f){const e=f,{useBitSpeed:s}=U(N()),a=_(()=>e.value(e.torrent));return(t,d)=>(l(),m("div",fa,[t.titleKey?(l(),m("div",ba,v(t.$t(t.titleKey)),1)):S("",!0),g("div",null,[K(v(i(Bt)(a.value,i(s)))+" ",1),g("span",ya,v(i(Et)(a.value,i(s))),1)])]))}});_a={class:"d-flex flex-column"};ga={key:0,class:"text-caption text-grey"};mt=w({__name:"ItemText",props:{torrent:{},titleKey:{},value:{type:Function},color:{type:Function}},setup(f){const e=f,s=_(()=>e.value(e.torrent));return(a,t)=>(l(),m("div",_a,[a.titleKey?(l(),m("div",ga,v(a.$t(a.titleKey)),1)):S("",!0),g("div",{class:oe(a.color?a.color(s.value):"")},v(s.value),3)]))}});ka={class:"d-flex flex-gap flex-wrap"};Ta=w({__name:"GridTorrent",props:{torrent:{}},emits:["onTorrentClick"],setup(f){const e=f,{current:s}=at(),a=Y(),t=N(),d=_(()=>(e.torrent.progress===1?t.doneGridProperties:t.busyGridProperties).filter(b=>b.active).sort((b,c)=>b.order-c.order)),o=r=>{switch(r){case D.AMOUNT:return lt;case D.CHIP:return nt;case D.DATA:return st;case D.DATETIME:return rt;case D.DURATION:return it;case D.PERCENT:return dt;case D.RELATIVE:return ut;case D.SPEED:return ct;case D.TEXT:default:return mt}},h=_(()=>a.isTorrentInSelection(e.torrent.hash)),p=_(()=>s.value.colors[W(e.torrent.state)]);return(r,b)=>(l(),I(ne,{class:"cursor-pointer",style:Te(`border-left: 6px solid ${p.value}`),height:"100%",color:h.value?`${i(W)(r.torrent.state)}-darken-3`:void 0,onClick:b[0]||(b[0]=c=>r.$emit("onTorrentClick",c,r.torrent))},{default:u(()=>[n(Ee,{class:"text-wrap text-subtitle-1 pt-1 pb-0"},{default:u(()=>[K(v(r.torrent.name),1)]),_:1}),n(me,null,{default:u(()=>[g("div",ka,[(l(!0),m(R,null,q(d.value,c=>(l(),m(R,null,[c.props?(l(),I(Pe(o(c.type)),O({key:0,torrent:r.torrent,ref_for:!0},c.props),null,16,["torrent"])):S("",!0)],64))),256))])]),_:1})]),_:1},8,["style","color"]))}});$a={class:"d-flex align-center",style:{height:"100%",width:"100%"}};Ca=w({__name:"GridView",props:{paginatedTorrents:{}},emits:["onCheckboxClick","onTorrentClick","onTorrentDblClick","onTorrentRightClick","startPress","endPress"],setup(f){const e=ot(),s=Y();return(a,t)=>(l(),I(Re,{id:"torrentList"},{default:u(()=>[(l(!0),m(R,null,q(a.paginatedTorrents,d=>(l(),I(be,{cols:"12",lg:"3",md:"4",sm:"6",xl:"2",class:oe([i(e).mobile?"pb-2":"pb-4","pt-0"]),onContextmenu:o=>a.$emit("onTorrentRightClick",o,d),onTouchcancel:t[1]||(t[1]=o=>a.$emit("endPress")),onTouchend:t[2]||(t[2]=o=>a.$emit("endPress")),onTouchmove:t[3]||(t[3]=o=>a.$emit("endPress")),onTouchstart:o=>a.$emit("startPress",o.touches.item(0),d),onDblclick:o=>a.$emit("onTorrentDblClick",d)},{default:u(()=>[g("div",$a,[n(tt,null,{default:u(()=>[i(s).isSelectionMultiple?(l(),I(A,{key:0,color:i(W)(d.state),icon:i(s).isTorrentInSelection(d.hash)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",class:"mr-2",variant:"text",onClick:o=>a.$emit("onCheckboxClick",d)},null,8,["color","icon","onClick"])):S("",!0)]),_:2},1024),n(Ta,{torrent:d,onOnTorrentClick:t[0]||(t[0]=(o,h)=>a.$emit("onTorrentClick",o,h))},null,8,["torrent"])])]),_:2},1032,["class","onContextmenu","onTouchstart","onDblclick"]))),256))]),_:1}))}});wa=Fe(Ca,[["__scopeId","data-v-d4d10d01"]]);Va={class:"d-flex flex-gap flex-wrap"};Sa=w({__name:"ListTorrent",props:{torrent:{}},emits:["onTorrentClick"],setup(f){const e=f,{current:s}=at(),a=Y(),t=N(),d=_(()=>(e.torrent.progress===1?t.doneTorrentProperties:t.busyTorrentProperties).filter(b=>b.active).sort((b,c)=>b.order-c.order)),o=r=>{switch(r){case D.AMOUNT:return lt;case D.CHIP:return nt;case D.DATA:return st;case D.DATETIME:return rt;case D.DURATION:return it;case D.PERCENT:return dt;case D.RELATIVE:return ut;case D.SPEED:return ct;case D.TEXT:default:return mt}},h=_(()=>a.isTorrentInSelection(e.torrent.hash)),p=_(()=>s.value.colors[W(e.torrent.state)]);return(r,b)=>(l(),I(ne,{class:"cursor-pointer",style:Te(`border-left: 6px solid ${p.value}`),width:"100%",color:h.value?`${i(W)(r.torrent.state)}-darken-3`:void 0,onClick:b[0]||(b[0]=c=>r.$emit("onTorrentClick",c,r.torrent))},{default:u(()=>[n(Ee,{class:"text-wrap pt-1 pb-0 px-2 text-truncate",style:{"font-size":"0.97em"}},{default:u(()=>[K(v(r.torrent.name),1)]),_:1}),n(me,{class:"pa-2 pt-0"},{default:u(()=>[g("div",Va,[(l(!0),m(R,null,q(d.value,c=>(l(),m(R,null,[c.props?(l(),I(Pe(o(c.type)),O({key:0,torrent:r.torrent,ref_for:!0},c.props),null,16,["torrent"])):S("",!0)],64))),256))])]),_:1})]),_:1},8,["style","color"]))}});xa={class:"d-flex align-center"};Da=w({__name:"ListView",props:{paginatedTorrents:{}},emits:["onCheckboxClick","onTorrentClick","onTorrentDblClick","onTorrentRightClick","startPress","endPress"],setup(f){const e=ot(),s=Y();return(a,t)=>(l(),I(Ze,{id:"torrentList",class:"pa-0"},{default:u(()=>[(l(!0),m(R,null,q(a.paginatedTorrents,d=>(l(),I(ue,{id:`torrent-${d.hash}`,class:oe([i(e).mobile?"mb-2":"mb-4","pa-0"]),onContextmenu:o=>a.$emit("onTorrentRightClick",o,d),onTouchcancel:t[1]||(t[1]=o=>a.$emit("endPress")),onTouchend:t[2]||(t[2]=o=>a.$emit("endPress")),onTouchmove:t[3]||(t[3]=o=>a.$emit("endPress")),onTouchstart:o=>a.$emit("startPress",o.touches.item(0),d),onDblclick:o=>a.$emit("onTorrentDblClick",d)},{default:u(()=>[g("div",xa,[n(tt,null,{default:u(()=>[i(s).isSelectionMultiple?(l(),I(A,{key:0,color:i(W)(d.state),icon:i(s).isTorrentInSelection(d.hash)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",class:"mr-2",variant:"text",onClick:o=>a.$emit("onCheckboxClick",d)},null,8,["color","icon","onClick"])):S("",!0)]),_:2},1024),n(Sa,{torrent:d,onOnTorrentClick:t[0]||(t[0]=(o,h)=>a.$emit("onTorrentClick",o,h))},null,8,["torrent"])])]),_:2},1032,["id","class","onContextmenu","onTouchstart","onDblclick"]))),256))]),_:1}))}});Ia=Fe(Da,[["__scopeId","data-v-8828dd56"]]);Pa={class:"text-no-wrap"};Ba={key:0};Ea=w({__name:"ItemAmount",props:{torrent:{},value:{type:Function},total:{type:Function}},setup(f){return(e,s)=>(l(),m("td",Pa,[K(v(e.value(e.torrent))+" ",1),e.total?(l(),m("span",Ba," / "+v(e.total(e.torrent)),1)):S("",!0)]))}});La={key:0,class:"d-flex flex-row flex-gap-column-small"};Aa=w({__name:"ItemChip",props:{torrent:{},value:{},emptyValueKey:{},color:{},enableHashColor:{type:Boolean,default:!1}},setup(f){const e=f,{hideChipIfUnset:s}=U(N()),a=_(()=>e.value(e.torrent)),t=_(()=>a.value.length<1||a.value[0]===""),d=_(()=>!(s.value&&t.value));return(o,h)=>(l(),m("td",null,[d.value?(l(),m("div",La,[t.value?(l(),I(ge,{key:0,disabled:!0,"default-color":o.color(o.torrent),value:o.$t(o.emptyValueKey),size:"small"},null,8,["default-color","value"])):(l(!0),m(R,{key:1},q(a.value,p=>(l(),I(ge,{disabled:!o.enableHashColor,"default-color":o.color(o.torrent),value:p,size:"small"},null,8,["disabled","default-color","value"]))),256))])):S("",!0)]))}});Ka={class:"text-no-wrap"};Ma=w({__name:"ItemData",props:{torrent:{},value:{type:Function}},setup(f){const{useBinarySize:e}=U(N());return(s,a)=>(l(),m("td",Ka,v(i(Lt)(s.value(s.torrent),i(e))),1))}});Ra={key:0,class:"text-no-wrap"};Fa={key:1,class:"text-no-wrap"};Ua=w({__name:"ItemDateTime",props:{torrent:{},value:{type:Function}},setup(f){const e=f,{dateFormat:s}=U(N()),a=_(()=>e.value(e.torrent));return(t,d)=>a.value>0?(l(),m("td",Ra,v(i(We)(a.value,i(s))),1)):(l(),m("td",Fa,v(t.$t("dashboard.not_complete")),1))}});Na={key:0,class:"text-no-wrap"};Oa={key:1,class:"text-no-wrap"};za=w({__name:"ItemDuration",props:{torrent:{},unit:{},value:{type:Function}},setup(f){const e=f,s=_(()=>e.value(e.torrent)),a=_(()=>{const t=Ce.duration(s.value,e.unit),d=[t.years(),t.months(),t.days(),t.hours(),t.minutes(),t.seconds()],o=["Y","M","d","h","m","s"];let h=!1;return d.map((p,r)=>{if(h||p)return h=!0,`${p}${o[r]}`}).filter(p=>p).join(" ")});return(t,d)=>s.value>0?(l(),m("td",Na,v(a.value),1)):(l(),m("td",Oa,v(t.$t("common.NA")),1))}});Ha=w({__name:"ItemPercent",props:{torrent:{},value:{type:Function},color:{type:Function}},setup(f){const e=f,s=_(()=>e.value(e.torrent));return(a,t)=>(l(),m("td",null,[n(et,{"model-value":s.value,max:1,height:20,color:a.color(a.torrent),rounded:"sm",style:{width:"10em"}},{default:u(()=>[K(v(i(Je)(s.value)),1)]),_:1},8,["model-value","color"])]))}});Ga={class:"text-no-wrap"};ja=w({__name:"ItemRelativeTime",props:{torrent:{},value:{type:Function}},setup(f){return(e,s)=>(l(),m("td",Ga,v(i(Ce)(e.value(e.torrent)*1e3).fromNow()),1))}});qa={class:"text-no-wrap"};Xa=w({__name:"ItemSpeed",props:{torrent:{},value:{type:Function}},setup(f){const{useBitSpeed:e}=U(N());return(s,a)=>(l(),m("td",qa,v(i(At)(s.value(s.torrent),i(e))),1))}});Ya=w({__name:"ItemText",props:{torrent:{},value:{type:Function},color:{type:Function}},setup(f){const e=f,s=_(()=>e.value(e.torrent));return(a,t)=>(l(),m("td",{class:oe([a.color?a.color(s.value):"","text-no-wrap"])},v(s.value),3))}});Qa=w({__name:"TableTorrent",props:{torrent:{}},setup(f){const e=N(),s=_(()=>e.tableProperties.filter(t=>t.active).sort((t,d)=>t.order-d.order)),a=t=>{switch(t){case D.AMOUNT:return Ea;case D.CHIP:return Aa;case D.DATA:return Ma;case D.DATETIME:return Ua;case D.DURATION:return za;case D.PERCENT:return Ha;case D.RELATIVE:return ja;case D.SPEED:return Xa;case D.TEXT:default:return Ya}};return(t,d)=>(l(!0),m(R,null,q(s.value,o=>(l(),m(R,null,[o.props?(l(),I(Pe(a(o.type)),O({key:0,torrent:t.torrent,ref_for:!0},o.props),null,16,["torrent"])):S("",!0)],64))),256))}});Za=f=>(ft("data-v-403c3005"),f=f(),bt(),f);Wa=Za(()=>g("th",{class:"px-1"},null,-1));Ja={key:0};eo={class:"text-left"};to={class:"text-left"};ao=["onContextmenu","onTouchstart","onClick","onDblclick"];oo={key:0};lo=w({__name:"TableView",props:{paginatedTorrents:{}},emits:["onCheckboxClick","onTorrentClick","onTorrentDblClick","onTorrentRightClick","startPress","endPress"],setup(f){const e=Y(),s=N(),a=_(()=>s.tableProperties.filter(o=>o.active).sort((o,h)=>o.order-h.order));function t(o){return e.isTorrentInSelection(o.hash)}const d=o=>["cursor-pointer",t(o)?`bg-${W(o.state)}-darken-3 selected`:""];return(o,h)=>(l(),I(Kt,{id:"torrentList",class:"pa-0",density:"compact"},{default:u(()=>[g("thead",null,[g("tr",null,[Wa,i(e).isSelectionMultiple?(l(),m("th",Ja)):S("",!0),g("th",eo,v(o.$t("torrent.properties.name")),1),(l(!0),m(R,null,q(a.value,p=>(l(),m("th",to,v(o.$t(p.props.titleKey)),1))),256))])]),g("tbody",null,[(l(!0),m(R,null,q(o.paginatedTorrents,p=>Xe((l(),m("tr",{class:oe(d(p)),onContextmenu:r=>o.$emit("onTorrentRightClick",r,p),onTouchcancel:h[0]||(h[0]=r=>o.$emit("endPress")),onTouchend:h[1]||(h[1]=r=>o.$emit("endPress")),onTouchmove:h[2]||(h[2]=r=>o.$emit("endPress")),onTouchstart:r=>o.$emit("startPress",r.touches.item(0),p),onClick:r=>o.$emit("onTorrentClick",r,p),onDblclick:r=>o.$emit("onTorrentDblClick",p)},[g("td",{class:oe(`pa-0 bg-torrent-${i(Oe)[p.state].toLowerCase()}`)},null,2),i(e).isSelectionMultiple?(l(),m("td",oo,[n(ye,{"model-value":t(p),color:`torrent-${i(Oe)[p.state].toLowerCase()}`,variant:"text",onClick:Q(r=>o.$emit("onCheckboxClick",p),["stop"])},null,8,["model-value","color","onClick"])])):S("",!0),g("td",null,v(p.name),1),n(Qa,{torrent:p},null,8,["torrent"])],42,ao)),[[Mt]])),256))])]),_:1}))}});no=Fe(lo,[["__scopeId","data-v-403c3005"]]);so={class:"pt-4 px-1 px-sm-5"};ro={class:"text-grey"};io={key:0,class:"mt-5 text-xs-center"};uo={class:"text-grey"};co={key:1};mo={key:5};_o=w({__name:"Dashboard",setup(f){const{t:e}=ke(),s=qe(),a=Y(),{currentPage:t,isSelectionMultiple:d,selectedTorrents:o,displayMode:h}=U(a),p=Ye(),r=le(),{processedTorrents:b}=U(r),c=N(),L=_(()=>h.value===j.LIST),P=_(()=>h.value===j.GRID),C=_(()=>h.value===j.TABLE),{paginatedResults:$,currentPage:y,pageCount:T}=Ut(b,c.paginationSize,t),x=_(()=>b.value.length<=o.value.length),F=Ge({isVisible:!1,offset:[0,0]});function pe(){window.scrollTo({top:0,behavior:"smooth"})}function ve(k){if(k)return Ve(()=>{document.getElementById("searchInput")?.focus()});Ve(()=>{document.getElementById("searchInput")?.blur()})}function we(){x.value?a.unselectAllTorrents():a.selectTorrents(...b.value.map(k=>k.hash))}function se(k){d.value||s.push({name:"torrentDetail",params:{hash:k.hash}})}function re(k){a.toggleSelect(k.hash)}function ie(k,B){k.shiftKey?a.spanTorrentSelection(B.hash):(De(k)||a.isSelectionMultiple)&&(a.isSelectionMultiple=!0,a.toggleSelect(B.hash))}async function J(k,B){F.isVisible&&(F.isVisible=!1,await Ve()),F.isVisible=!0,F.offset=[k.pageX,k.pageY],d.value?o.value.length===0&&a.selectTorrent(B.hash):(a.unselectAllTorrents(),a.selectTorrent(B.hash))}const he=M();function ee(k,B){he.value=setTimeout(()=>{J(k,B)},500)}function de(){clearTimeout(he.value)}function fe(k){if(p.hasActiveDialog)return!1;const B=k.target;if(De(k)&&k.key==="a"&&B.tagName!=="INPUT")return a.unselectAllTorrents(),a.selectTorrents(...b.value.map(E=>E.hash)),k.preventDefault(),!0;if(De(k)&&k.key==="f"){const E=document.getElementById("searchInput");if(document.activeElement!==E)return ve(!0),k.preventDefault(),!0}if(k.key==="Escape"){const E=document.getElementById("searchInput");return document.activeElement===E?ve(!1):(d.value=!1,a.unselectAllTorrents()),k.preventDefault(),!0}if(k.key==="Delete"){if(o.value.length===0)return;const E=document.getElementById("searchInput");return document.activeElement!==E&&(p.createDialog(Qe,{hashes:o.value}),k.preventDefault()),!0}if(k.key==="/"){const E=document.getElementById("searchInput");return document.activeElement!==E&&(s.push({name:"searchEngine"}),k.preventDefault()),!0}}return yt(()=>F.isVisible,k=>{!k&&!d.value&&a.unselectAllTorrents()}),je(()=>{document.addEventListener("keydown",fe)}),_t(()=>{document.removeEventListener("keydown",fe)}),(k,B)=>(l(),m(R,null,[g("div",so,[n(Xt),n(Re,{class:"ma-0 pa-0"},{default:u(()=>[n(Rt,null,{default:u(()=>[Xe(n(ne,{color:"transparent"},{default:u(()=>[n(X,{text:i(e)("common.selectAll"),location:"bottom"},{activator:u(({props:E})=>[n(A,O({icon:x.value?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",class:"text-grey",color:"transparent",style:{left:"-8px"}},E,{onClick:we}),null,16,["icon"])]),_:1},8,["text"]),g("span",ro,v(i(e)("dashboard.selectAll")),1)]),_:1},512),[[gt,i(d)]])]),_:1})]),_:1}),i(b).length===0?(l(),m("div",io,[g("p",uo,v(i(e)("common.emptyList")),1)])):S("",!0),!i(c).isInfiniteScrollActive&&i(T)>1?(l(),m("div",co,[n(ze,{modelValue:i(y),"onUpdate:modelValue":B[0]||(B[0]=E=>ce(y)?y.value=E:null),length:i(T),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left",onInput:pe},null,8,["modelValue","length"])])):S("",!0),L.value?(l(),I(Ia,{key:2,"paginated-torrents":i($),onOnTorrentClick:ie,onOnTorrentDblClick:se,onOnCheckboxClick:re,onOnTorrentRightClick:J,onStartPress:ee,onEndPress:de},null,8,["paginated-torrents"])):P.value?(l(),I(wa,{key:3,class:"mb-2","paginated-torrents":i($),onOnTorrentClick:ie,onOnTorrentDblClick:se,onOnCheckboxClick:re,onOnTorrentRightClick:J,onStartPress:ee,onEndPress:de},null,8,["paginated-torrents"])):C.value?(l(),I(no,{key:4,"paginated-torrents":i($),onOnTorrentClick:ie,onOnTorrentDblClick:se,onOnCheckboxClick:re,onOnTorrentRightClick:J,onStartPress:ee,onEndPress:de},null,8,["paginated-torrents"])):S("",!0),!i(c).isInfiniteScrollActive&&i(T)>1?(l(),m("div",mo,[n(ze,{modelValue:i(y),"onUpdate:modelValue":B[1]||(B[1]=E=>ce(y)?y.value=E:null),length:i(T),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left",onInput:pe},null,8,["modelValue","length"])])):S("",!0)]),n(Ht,{"right-click-properties":F},null,8,["right-click-properties"])],64))}})});export{_o as default,__tla};