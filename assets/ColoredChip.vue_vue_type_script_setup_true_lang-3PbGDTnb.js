import{V as $,j as N,a3 as F,a4 as H,t as I,w as O,z as K,c as z,u as U,a5 as A,d as L,e as q,f as j,g as G,a as J,O as Y,P as Z,i as Q,k as B,l as W,o as X,a6 as R,a7 as x}from"./index-CC-Jl0Pd.js";import{h as w,Z as ee,u as C,B as l,D as i,G as t,R as ae,I as p,J as u,M as c,N as T,m as o,_ as te,n as oe,F as le,$ as se,a0 as ne,a1 as re,d as M,r as ie,c as D,H as ue,K as de,L as me,O as ce,Y as ye,T as pe}from"./vue-Dxbi_Rk8.js";import{u as fe}from"./vuetify-DFML31-9.js";function E(s){return!P(s)}function P(s){return"type"in s}function ve(s){return P(s)&&s.type==="divider"}const he={class:"d-flex"},Ve={key:2},De={key:3},Ce=w({__name:"RightClickMenuEntry",props:{entryData:{}},setup(s){const a=s,r=()=>{E(a.entryData)&&a.entryData.action&&a.entryData.action()};return(e,n)=>{const f=ee("RightClickMenuEntry",!0);return C(E)(e.entryData)&&!e.entryData.hidden?(l(),i(O,{key:0,class:"px-3",disabled:e.entryData.disabled,onClick:r},{default:t(()=>[ae("div",he,[e.entryData.disabled&&e.entryData.disabledIcon?(l(),i($,{key:0,class:"mr-2"},{default:t(()=>[p(u(e.entryData.disabledIcon),1)]),_:1})):e.entryData.icon?(l(),i($,{key:1,class:"mr-2"},{default:t(()=>[p(u(e.entryData.icon),1)]),_:1})):c("",!0),e.entryData.disabled&&e.entryData.disabledText?(l(),T("span",Ve,u(e.entryData.disabledText),1)):(l(),T("span",De,u(e.entryData.text),1)),o(N),!e.entryData.disabled&&e.entryData.children?(l(),i($,{key:4},{default:t(()=>n[0]||(n[0]=[p("mdi-chevron-right")])),_:1})):c("",!0)]),e.entryData.children?(l(),i(F,{key:0,activator:"parent","open-on-hover":"","open-on-click":"","close-delay":"10","open-delay":"0",location:"right"},{default:t(()=>[o(I,null,{default:t(()=>[o(H,{items:e.entryData.children,"item-height":"48",renderless:""},{default:t(({item:v})=>[o(f,{entryData:v},null,8,["entryData"])]),_:1},8,["items"])]),_:1})]),_:1})):c("",!0)]),_:1},8,["disabled"])):C(P)(e.entryData)?(l(),T(le,{key:1},[C(ve)(e.entryData)?(l(),i(K,te(oe({key:0},e.entryData.props)),null,16)):c("",!0)],64)):c("",!0)}}}),Te=w({__name:"RightClickMenu",props:se({menuData:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const a=ne(s,"modelValue");return(r,e)=>a.value?(l(),i(F,{key:0,modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value=n),activator:"parent","close-on-content-click":!0,transition:"slide-y-transition","scroll-strategy":"none"},{default:t(()=>[o(I,null,{default:t(()=>[re(r.$slots,"top"),r.$slots.top?(l(),i(K,{key:0,thickness:"3"})):c("",!0),o(H,{items:r.menuData,"item-height":"48",renderless:""},{default:t(({item:n})=>[o(Ce,{entryData:n},null,8,["entryData"])]),_:1},8,["items"])]),_:3})]),_:3},8,["modelValue"])):c("",!0)}}),we=w({__name:"MoveTorrentDialog",props:{guid:{},hashes:{},mode:{}},setup(s){const a=s,{isOpened:r}=z(a.guid),{t:e}=U(),n=A(),f=M(),v=M(),h=M(!1),V=ie({newPath:""}),g=[d=>!!d||e("dialogs.moveTorrent.required")],b=D(()=>a.hashes.map(n.getTorrentByHash)),y=D(()=>{switch(a.mode){case"dl":return b.value[0]?.download_path;case"save":return b.value[0]?.savePath}});async function _(){await f.value?.validate(),h.value&&(await n.toggleAutoTmm(a.hashes,!1),await n.moveTorrents(a.mode,a.hashes,V.newPath),v.value?.saveValueToHistory(),S())}const S=()=>{r.value=!1};return ue(()=>{V.newPath=y.value||""}),(d,m)=>(l(),i(W,{modelValue:C(r),"onUpdate:modelValue":m[3]||(m[3]=k=>ce(r)?r.value=k:null)},{default:t(()=>[o(L,null,{default:t(()=>[o(q,null,{default:t(()=>[p(u(d.$t(`dialogs.moveTorrent.${d.mode}.title`)),1)]),_:1}),o(j,null,{default:t(()=>[o(C(G),{modelValue:h.value,"onUpdate:modelValue":m[1]||(m[1]=k=>h.value=k),ref_key:"form",ref:f,onSubmit:m[2]||(m[2]=de(()=>{},["prevent"]))},{default:t(()=>[y.value?(l(),i(J,{key:0,"model-value":y.value,disabled:"",label:d.$t("dialogs.moveTorrent.oldPath")},null,8,["model-value","label"])):c("",!0),o(Y,{modelValue:V.newPath,"onUpdate:modelValue":m[0]||(m[0]=k=>V.newPath=k),historyKey:C(Z).TORRENT_PATH,ref_key:"field",ref:v,rules:g,autofocus:"",label:d.$t("dialogs.moveTorrent.newPath"),onKeydown:me(_,["enter"])},null,8,["modelValue","historyKey","label"])]),_:1},8,["modelValue"])]),_:1}),o(Q,null,{default:t(()=>[o(N),o(B,{color:"error",onClick:S},{default:t(()=>[p(u(d.$t("common.cancel")),1)]),_:1}),o(B,{color:"accent",disabled:!h.value,onClick:_},{default:t(()=>[p(u(d.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),_e=w({__name:"ColoredChip",props:{defaultColor:{},disabled:{type:Boolean,default:!1},disabledValue:{},value:{}},setup(s){const a=s,{t:r}=U(),{current:e}=fe(),{enableHashColors:n,hideColoredChip:f}=ye(X());function v(y){return e.value.colors[y]??y}const h=D(()=>a.disabled||!n.value?a.defaultColor:R(a.value)),V=D(()=>a.disabled||!n.value?v(a.defaultColor):R(a.value)),g=D(()=>a.disabled?a.disabledValue||a.value||r("common.none"):a.value),b=D(()=>!f.value);return(y,_)=>b.value?(l(),i(x,{key:0,color:h.value,variant:"flat"},{default:t(()=>[p(u(g.value),1)]),_:1},8,["color"])):(l(),T("div",{key:1,class:"text-no-wrap",style:pe(`color: ${V.value}`)},u(g.value),5))}});export{Te as _,we as a,_e as b};
